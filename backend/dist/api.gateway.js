'use strict';const _0xbc45b=_0x4053;(function(_0x3137bc,_0x138fbd){const _0x249410=_0x4053,_0x206149=_0x3137bc();while(!![]){try{const _0x123493=parseInt(_0x249410(0x19c))/0x1*(-parseInt(_0x249410(0x18d))/0x2)+-parseInt(_0x249410(0x187))/0x3*(-parseInt(_0x249410(0x188))/0x4)+parseInt(_0x249410(0x195))/0x5+parseInt(_0x249410(0x17e))/0x6*(-parseInt(_0x249410(0x18b))/0x7)+parseInt(_0x249410(0x18f))/0x8+parseInt(_0x249410(0x1ac))/0x9+parseInt(_0x249410(0x1a8))/0xa*(parseInt(_0x249410(0x1a4))/0xb);if(_0x123493===_0x138fbd)break;else _0x206149['push'](_0x206149['shift']());}catch(_0x5f4be0){_0x206149['push'](_0x206149['shift']());}}}(_0x5bbb,0x4f3b1));var __decorate=this&&this[_0xbc45b(0x1a5)]||function(_0x38bb45,_0x27733e,_0x3cbcf9,_0x8b5b49){const _0x5d1047=_0xbc45b;var _0x3dcaae=arguments['length'],_0x4b4579=_0x3dcaae<0x3?_0x27733e:_0x8b5b49===null?_0x8b5b49=Object[_0x5d1047(0x1a2)](_0x27733e,_0x3cbcf9):_0x8b5b49,_0x2cae96;if(typeof Reflect===_0x5d1047(0x182)&&typeof Reflect[_0x5d1047(0x1ab)]===_0x5d1047(0x19d))_0x4b4579=Reflect[_0x5d1047(0x1ab)](_0x38bb45,_0x27733e,_0x3cbcf9,_0x8b5b49);else{for(var _0x4c3230=_0x38bb45[_0x5d1047(0x198)]-0x1;_0x4c3230>=0x0;_0x4c3230--)if(_0x2cae96=_0x38bb45[_0x4c3230])_0x4b4579=(_0x3dcaae<0x3?_0x2cae96(_0x4b4579):_0x3dcaae>0x3?_0x2cae96(_0x27733e,_0x3cbcf9,_0x4b4579):_0x2cae96(_0x27733e,_0x3cbcf9))||_0x4b4579;}return _0x3dcaae>0x3&&_0x4b4579&&Object[_0x5d1047(0x192)](_0x27733e,_0x3cbcf9,_0x4b4579),_0x4b4579;},__metadata=this&&this[_0xbc45b(0x180)]||function(_0x3fd63e,_0x404f5b){const _0x4f5bdf=_0xbc45b;if(typeof Reflect==='object'&&typeof Reflect[_0x4f5bdf(0x181)]===_0x4f5bdf(0x19d))return Reflect[_0x4f5bdf(0x181)](_0x3fd63e,_0x404f5b);},__param=this&&this['__param']||function(_0x1a786e,_0x1f9b52){return function(_0x20e044,_0x1bd526){_0x1f9b52(_0x20e044,_0x1bd526,_0x1a786e);};};function _0x5bbb(){const _0x552dee=['design:type','WebSocketGateway','./trader/trader/trader','./ssl/key.pem','getOwnPropertyDescriptor','findAll','11xjoXJC','__decorate','SubscribeMessage','./ssl/cert.pem','692910efxnTq','server','createServer','decorate','5212863lXXXpM','@nestjs/websockets','connection','6rwtVuq','listen','__metadata','metadata','object','https','Trader','api','merge','6CQWCgP','366032tOFGiL','design:paramtypes','trader','3715698ZAaYvc','design:returntype','1282556SDuIyx','status','2838504okuOiS','from','ApiGateway','defineProperty','readFileSync','prototype','1551470lNtDll','MessageBody','rxjs','length','log','map','wallet','1rhczTz','function'];_0x5bbb=function(){return _0x552dee;};return _0x5bbb();}Object[_0xbc45b(0x192)](exports,'__esModule',{'value':!![]}),exports['ApiGateway']=void 0x0;function _0x4053(_0x5ba16c,_0x4271a7){const _0x5bbb40=_0x5bbb();return _0x4053=function(_0x40535b,_0x29568c){_0x40535b=_0x40535b-0x17e;let _0x369313=_0x5bbb40[_0x40535b];return _0x369313;},_0x4053(_0x5ba16c,_0x4271a7);}const websockets_1=require(_0xbc45b(0x1ad)),rxjs_1=require(_0xbc45b(0x197)),ws_1=require('ws'),trader_1=require(_0xbc45b(0x1a0)),https_1=require(_0xbc45b(0x183)),fs_1=require('fs');let ApiGateway=class ApiGateway{constructor(_0x40b34e){const _0xfc459=_0xbc45b;this[_0xfc459(0x18a)]=_0x40b34e;}['afterInit'](){const _0x3cdea1=_0xbc45b,_0x4cbff8={'key':(0x0,fs_1[_0x3cdea1(0x193)])(_0x3cdea1(0x1a1)),'cert':(0x0,fs_1['readFileSync'])(_0x3cdea1(0x1a7))},_0x2e6cf3=(0x0,https_1[_0x3cdea1(0x1aa)])(_0x4cbff8);_0x2e6cf3[_0x3cdea1(0x17f)](0x1f90),this[_0x3cdea1(0x1a9)]=new ws_1['Server']({'server':_0x2e6cf3}),this[_0x3cdea1(0x1a9)]['on'](_0x3cdea1(0x1ae),_0xff2438=>{const _0x12579f=_0x3cdea1;console[_0x12579f(0x199)]('Новое\x20wss\x20соединение\x20установлено');});}['findAll'](_0x1f6538){const _0x423588=_0xbc45b;return(0x0,rxjs_1[_0x423588(0x186)])((0x0,rxjs_1[_0x423588(0x190)])([{'status':_0x423588(0x185),'alive':!!this[_0x423588(0x18a)]['api']},{'status':_0x423588(0x19b),'alive':!!this[_0x423588(0x18a)][_0x423588(0x19b)]}]),this['trader'][_0x423588(0x18e)])['pipe']((0x0,rxjs_1[_0x423588(0x19a)])(_0xed8586=>({'event':_0x423588(0x185),'data':_0xed8586})));}};__decorate([(0x0,websockets_1['WebSocketServer'])(),__metadata(_0xbc45b(0x19e),ws_1['Server'])],ApiGateway[_0xbc45b(0x194)],_0xbc45b(0x1a9),void 0x0),__decorate([(0x0,websockets_1[_0xbc45b(0x1a6)])(_0xbc45b(0x185)),__param(0x0,(0x0,websockets_1[_0xbc45b(0x196)])()),__metadata(_0xbc45b(0x19e),Function),__metadata('design:paramtypes',[Object]),__metadata(_0xbc45b(0x18c),void 0x0)],ApiGateway[_0xbc45b(0x194)],_0xbc45b(0x1a3),null),ApiGateway=__decorate([(0x0,websockets_1[_0xbc45b(0x19f)])(),__metadata(_0xbc45b(0x189),[trader_1[_0xbc45b(0x184)]])],ApiGateway),exports[_0xbc45b(0x191)]=ApiGateway;